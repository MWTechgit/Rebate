!function(t){var e={};function s(a){if(e[a])return e[a].exports;var i=e[a]={i:a,l:!1,exports:{}};return t[a].call(i.exports,i,i.exports,s),i.l=!0,i.exports}s.m=t,s.c=e,s.d=function(t,e,a){s.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:a})},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/",s(s.s=0)}([function(t,e,s){s(1),t.exports=s(6)},function(t,e,s){Nova.booting(function(t,e,a){t.config.devtools=!0,window.Vue=t,t.component("review-application",s(2))}),Nova.booting(function(t,e,s){t.config.devtools=!0,window.Vue=t,e.afterEach(function(t,e){window.scrollTo(0,0)})})},function(t,e,s){var a=s(3)(s(4),s(5),!1,null,null,null);t.exports=a.exports},function(t,e){t.exports=function(t,e,s,a,i,r){var n,o=t=t||{},l=typeof t.default;"object"!==l&&"function"!==l||(n=t,o=t.default);var c,p="function"==typeof o?o.options:o;if(e&&(p.render=e.render,p.staticRenderFns=e.staticRenderFns,p._compiled=!0),s&&(p.functional=!0),i&&(p._scopeId=i),r?(c=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),a&&a.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(r)},p._ssrRegister=c):a&&(c=a),c){var d=p.functional,_=d?p.render:p.beforeCreate;d?(p._injectStyles=c,p.render=function(t,e){return c.call(e),_(t,e)}):p.beforeCreate=_?[].concat(_,c):[c]}return{esModule:n,exports:o,options:p}}},function(t,e,s){"use strict";function a(t){!function(t,e,s){var a,i,r,n=new google.maps.Geocoder;t.replace(/" "/,"+"),n.geocode({address:t},function(t,n){n==google.maps.GeocoderStatus.OK?(r={zoom:12,center:t[0].geometry.location,mapTypeId:google.maps.MapTypeId.ROADMAP},a=new google.maps.Map(document.getElementById(e),r),new google.maps.KmlLayer(Nova.config.gmap_kml_file_url,{map:a,preserveViewport:!0,suppressInfoWindows:!0}),i=new google.maps.Marker({animation:google.maps.Animation.DROP,map:a,position:t[0].geometry.location}),new google.maps.InfoWindow({content:s}).open(a,i)):console.log("Google Map geocode failed")})}(t,"gmap-embed",t)}function i(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}Object.defineProperty(e,"__esModule",{value:!0});e.default={props:["resourceName","resourceId","field"],data:function(){var t;return i(t={busy:!1,application:null,applicant:null,property:null},"applicant",null),i(t,"rebate",null),i(t,"utility",null),i(t,"dataFetched",!1),i(t,"apiError",null),t},computed:{missingData:function(){return!((this.application||{}).id&&(this.applicant||{}).id&&(this.property||{}).id&&(this.property.address||{}).id)},mapSrc:function(){return"https://maps.googleapis.com/maps/api/staticmap?center=plantation,fl&zoom=11&size=400x500&key="+Nova.config.gmap_api_key}},mounted:function(){this.fetch()},methods:{fetch:function(){var t=this;this.apiError=!1,this.busy=!0,axios.get("/api/applications/"+this.resourceId).then(function(e){var s=e.data.data;t.application=s,t.property=s.property||{address:{}},t.applicant=s.applicant||{},t.rebate=s.rebate||{},t.utilityAccount=s.utilityAccount||{address:{}},t.property.address.full&&a(t.property.address.full),t.dataFetched=!0}).catch(function(e){return t.fail(e)}).finally(function(){return t.busy=!1})},fail:function(t){if(console.error(t),"string"==typeof t)var e=t;else if((t||{}).response)e=_.get(t.response,"data.message")||t.response.statusText;else e=t.message||t.name||"Something went wrong. Contact a system admin.";this.apiError=e;try{this.$toasted.show(e,{type:"error"})}catch(t){this.$toasted.show("Something went wrong. Contact a system admin",{type:"error"})}return Promise.reject()}}}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t.apiError?s("div",{staticClass:"py-1 border-b border-40"},[s("p",[t._v("The following error was received: "),s("span",{staticStyle:{color:"red"}},[t._v(t._s(t.apiError))])]),t._v(" "),s("button",{staticClass:"mt-3 btn btn-default bg-grey-light hover:bg-grey text-grey-darkest",attrs:{type:"button"},on:{click:t.fetch}},[t._v("\n            Try again?\n        ")])]):t._e(),t._v(" "),t.dataFetched?s("div",[t.missingData?s("div",{staticClass:"alert alert-warning mt-4"},[s("h4",{staticClass:"alert-heading"},[t._v("Application Corrupted")]),t._v(" "),s("p",[t._v("This application is missing necessary data. It may cause problems on pages where it is displayed.")])]):t._e(),t._v(" "),t.application.denied?s("div",{staticClass:"alert alert-warning mt-4"},[s("h4",{staticClass:"alert-heading"},[t._v("Application Denied")]),t._v(" "),s("p",[t._v("This application was denied "),s("span",{attrs:{title:t.application.denied_on}},[t._v(t._s(t.application.denied_diff))]),t._v(" by "+t._s(t.application.denied_by))]),t._v(" "),s("hr"),t._v(" "),t.application.reason?s("p",[t._v(t._s(t.application.reason))]):t._e()]):t.application.approved?s("div",{staticClass:"alert alert-success mt-4"},[s("h4",{staticClass:"alert-heading"},[t._v("Application Approved")]),t._v(" "),s("p",[t._v("This application was approved "),s("span",{attrs:{title:t.application.approved_on}},[t._v(t._s(t.application.approved_diff))]),t._v(" by "+t._s(t.application.approved_by))]),t._v(" "),t.application.reason?s("p",[t._v(t._s(t.application.reason))]):t._e()]):t._e()]):t._e(),t._v(" "),t.dataFetched?s("div",{staticClass:"flex"},[s("div",{staticClass:"flex-1 mr-6"},[s("div",[s("div",{staticClass:"flex border-b border-40"},[t._m(0),t._v(" "),s("div",{staticClass:"w-2/3 py-1"},[s("router-link",{staticClass:"no-underline font-bold dim text-primary",attrs:{to:{name:"detail",params:{resourceName:"applicants",resourceId:t.applicant.id}}}},[t._v("\n                            "+t._s(t.applicant.full_name)+"\n                        ")]),t._v(" "),s("p",{staticClass:"my-1 text-90"},[t._v(t._s(t.application.rebate_code)+" "),s("span",{staticClass:"label"},[t._v(t._s(t.application.status))])])],1)]),t._v(" "),s("div",{staticClass:"flex border-b border-40"},[t._m(1),t._v(" "),s("div",{staticClass:"w-2/3 py-1"},[s("p",{staticClass:"text-90"},[t._v(t._s(t.applicant.phone))])])]),t._v(" "),s("div",{staticClass:"flex border-b border-40"},[t._m(2),t._v(" "),s("div",{staticClass:"w-2/3 py-1"},[s("p",{staticClass:"text-90"},[s("a",{attrs:{href:"mailto:"+t.applicant.email}},[t._v(t._s(t.applicant.email))])])])]),t._v(" "),s("div",{staticClass:"flex border-b border-40"},[t._m(3),t._v(" "),s("div",{staticClass:"w-2/3 py-1"},[s("p",{staticClass:"text-90 mb-2"},[t._v(t._s(t.rebate.partner.name)+", "+t._s(t.rebate.fy_year))]),t._v(" "),s("div",{staticClass:"label"},[t._v("Applied For: "+t._s(t.application.rebate_count))]),t._v(" "),s("div",{staticClass:"label"},[t._v("Remaining: "+t._s(t.rebate.remaining))])])]),t._v(" "),s("div",{staticClass:"flex border-b border-40"},[t._m(4),t._v(" "),s("div",{staticClass:"w-2/3 py-1"},[s("p",{staticClass:"text-90 mb-2"},[t._v("\n                            "+t._s(t.property.address.full)+"\n                        ")])])]),t._v(" "),s("div",{staticClass:"flex border-b border-40"},[t._m(5),t._v(" "),s("div",{staticClass:"w-2/3 py-1"},[s("p",{staticClass:"text-90"},[t._v("\n                            "+t._s(t.property.building_type)+"\n                            "),s("span",{staticClass:"label"},[t._v("Built "+t._s(t.property.year_built||"?"))]),t._v(" "),s("span",{staticClass:"label"},[t._v("Bathrooms: "+t._s(t.property.bathrooms))])])])]),t._v(" "),s("div",{staticClass:"flex border-b border-40"},[t._m(6),t._v(" "),s("div",{staticClass:"w-2/3 py-1"},[s("p",{staticClass:"text-90"},[t._v(t._s(t.property.years_lived))])])]),t._v(" "),s("div",{staticClass:"flex border-b border-40"},[t._m(7),t._v(" "),s("div",{staticClass:"w-2/3 py-1"},[s("p",{staticClass:"text-90"},[t._v(t._s(t.property.occupants))])])]),t._v(" "),s("div",{staticClass:"flex border-b border-40"},[t._m(8),t._v(" "),s("div",{staticClass:"w-2/3 py-1"},[t.property.owner?s("p",{staticClass:"text-90"},[s("router-link",{staticClass:"no-underline font-bold dim text-primary",attrs:{to:{name:"detail",params:{resourceName:"owners",resourceId:t.property.owner.id}}}},[t._v("\n                                "+t._s(t.property.owner.full_name)+"\n                            ")])],1):s("p",{staticClass:"text-90"},[t._v("\n                            Applicant\n                        ")])])]),t._v(" "),s("div",{staticClass:"flex py-1 border-b border-40"},[t._m(9),t._v(" "),s("div",{staticClass:"w-2/3 py-1"},[t.property.is_residential?s("p",{staticClass:"text-90"},[t._v("\n                        "+t._s(t.property.half_bathrooms||"0")+" Half, "+t._s(t.property.full_bathrooms||"0")+" Full, "+t._s(t.property.toilets||"0")+" Toilets\n                        ")]):s("p",{staticClass:"text-90"},[t._v("\n                        "+t._s(t.property.bathrooms||"0")+" Bathrooms, "+t._s(t.property.toilets||"0")+" Toilets\n                        ")])])]),t._v(" "),s("div",{staticClass:"flex py-1 border-b border-40"},[t._m(10),t._v(" "),s("div",{staticClass:"w-2/3 py-1"},[s("p",{staticClass:"text-90"},[t._v(t._s(t.property.original_toilet))])])]),t._v(" "),s("div",{staticClass:"flex py-1 border-b border-40"},[t._m(11),t._v(" "),s("div",{staticClass:"w-2/3 py-1"},[s("p",{staticClass:"text-90"},[t._v(t._s(t.property.gallons_per_flush))])])]),t._v(" "),s("div",{staticClass:"flex py-1 border-b border-40"},[t._m(12),t._v(" "),s("div",{staticClass:"w-2/3 py-1"},[s("p",{staticClass:"text-90"},[t._v(t._s(t.application.submission_type))])])]),t._v(" "),s("div",{staticClass:"flex py-1 border-b border-40"},[t._m(13),t._v(" "),s("div",{staticClass:"w-2/3 py-1"},[t.application.reference?s("p",{staticClass:"text-90"},[t._v(t._s(t.application.reference.type)+"\n                            "),t.application.reference.info_response?s("small",[t._v(t._s(t.application.reference.info_response))]):t._e()]):t._e()])]),t._v(" "),s("div",{staticClass:"flex"},[t._m(14),t._v(" "),s("div",{staticClass:"w-2/3 py-1"},[s("router-link",{staticClass:"no-underline dim text-primary",attrs:{to:{name:"edit",params:{resourceName:"properties",resourceId:t.property.id}}}},[t._v("\n                            Edit Property Details\n                        ")]),t._v("\n                         | \n\n                        "),t._v(" "),s("router-link",{staticClass:"no-underline dim text-primary",attrs:{to:{name:"edit",params:{resourceName:"addresses",resourceId:t.property.address.id}}}},[t._v("\n                            Edit Property Address\n                        ")])],1)]),t._v(" "),t.application.watersense?s("div",{staticClass:"flex py-1 border-b border-40"},[t._m(15),t._v(" "),s("div",{staticClass:"w-2/3 py-1"},[s("p",{staticClass:"text-90"},[t._v(t._s(t.application.watersense))])])]):t._e()])]),t._v(" "),s("div",{staticClass:"flex-1"},[s("div",{attrs:{id:"gmap-embed-wrap"}},[s("div",{attrs:{id:"gmap-embed"}},[s("img",{attrs:{src:t.mapSrc}})])]),t._v(" "),s("div",{staticClass:"py-1 border-b border-40"},[s("h2",{staticClass:"mb-3 font-normal text-90"},[t._v("Water Utility Information")]),t._v(" "),t.utilityAccount.id?s("a",{staticClass:"no-underline dim text-primary",attrs:{href:"/admin/resources/utility-accounts/"+t.utilityAccount.id}},[t._v("(Manage)")]):t._e(),t._v(" "),!t.utilityAccount.id&&t.property.id?s("div",[t._v("\n                    No Record Found\n                    "),s("a",{staticClass:"no-underline dim text-primary",attrs:{href:"/admin/resources/utility-accounts/new?viaResource=properties&viaResourceId="+t.property.id+"&viaRelationship=utilityaccount"}},[t._v("(Create)")])]):t.utilityAccount.id?s("div",[s("div",{staticClass:"py-1 border-b border-40"},[s("h4",{staticClass:"mb-2 font-normal text-80"},[t._v("Billing Address")]),t._v(" "),t.utilityAccount.address?s("p",{staticClass:"text-90"},[t._v("\n                            "+t._s(t.utilityAccount.address.full)+"\n                            "),s("router-link",{staticClass:"no-underline dim text-primary",attrs:{to:{name:"edit",params:{resourceName:"addresses",resourceId:t.utilityAccount.address.id}}}},[t._v("\n                                (Edit)\n                            ")])],1):s("p",{staticClass:"text-90"},[t._v("\n                            No Record Found\n                            "),s("a",{staticClass:"no-underline dim text-primary",attrs:{href:"/admin/resources/addresses/new?viaResource=utility-accounts&viaResourceId="+t.utilityAccount.id+"&viaRelationship=address"}},[t._v("(Create)")])])]),t._v(" "),s("div",{staticClass:"py-1 border-b border-40"},[s("h4",{staticClass:"mb-2 font-normal text-80"},[t._v("Account Number")]),t._v(" "),s("p",{staticClass:"text-90"},[t._v("\n                            "+t._s(t.utilityAccount.account_number)+"\n                            "),s("router-link",{staticClass:"no-underline dim text-primary",attrs:{to:{name:"edit",params:{resourceName:"utility-accounts",resourceId:t.utilityAccount.id}}}},[t._v("\n                                (Edit)\n                            ")])],1)])]):t._e()]),t._v(" "),s("div",{staticClass:"py-1"},[s("h2",{staticClass:"mb-3 font-normal text-90"},[t._v("Remittance Address Information")]),t._v(" "),t.application.has_remittance_address?s("div",[s("h4",{staticClass:"mb-2 font-normal text-80"},[t._v("\n                        Rebate Mail To Address\n                    ")]),t._v(" "),s("p",{staticClass:"text-90"}),s("p",{staticClass:"mb-2"},[t._v("\n                            "+t._s(t.application.mail_to_address)+"\n                            "),s("router-link",{staticClass:"no-underline dim text-primary",attrs:{to:{name:"edit",params:{resourceName:"remittance-addresses",resourceId:t.application.address.id}}}},[t._v("\n                                (Edit)\n                            ")])],1),t._v(" "),s("p")]):s("div",[t._v("\n                    Same as property address\n\n                    "),s("a",{staticClass:"no-underline dim text-primary",attrs:{href:"/admin/resources/remittance-addresses/new?viaResource=applications&viaResourceId="+t.application.id+"&viaRelationship=address"}},[t._v("(Edit)")])])])])]):t._e()])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"w-1/3 py-1"},[e("h4",{staticClass:"font-normal text-80"},[this._v("Applicant")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"w-1/3 py-1"},[e("h4",{staticClass:"font-normal text-80"},[this._v("Phone")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"w-1/3 py-1"},[e("h4",{staticClass:"font-normal text-80"},[this._v("E-Mail")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"w-1/3 py-1"},[e("h4",{staticClass:"mb-2 font-normal text-80"},[this._v("Partner")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"w-1/3 py-1"},[e("h4",{staticClass:"mb-2 font-normal text-80"},[this._v("Property")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"w-1/3 py-1"},[e("h4",{staticClass:"font-normal text-80"},[this._v("Structure")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"w-1/3 py-1"},[e("h4",{staticClass:"font-normal text-80"},[this._v("Years Lived")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"w-1/3 py-1"},[e("h4",{staticClass:"font-normal text-80"},[this._v("Occupants")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"w-1/3 py-1"},[e("h4",{staticClass:"font-normal text-80"},[this._v("Property Owner")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"w-1/3 py-1"},[e("h4",{staticClass:"font-normal text-80"},[this._v("Bathrooms")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"w-1/3 py-1"},[e("h4",{staticClass:"font-normal text-80"},[this._v("Original Toilet?")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"w-1/3 py-1"},[e("h4",{staticClass:"font-normal text-80"},[this._v("Gallons Per Flush")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"w-1/3 py-1"},[e("h4",{staticClass:"font-normal text-80"},[this._v("Submitted by")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"w-1/3 py-1"},[e("h4",{staticClass:"font-normal text-80"},[this._v("Reference")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"w-1/3 py-1"},[e("h4",{staticClass:"font-normal text-80"},[this._v("Links")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"w-1/3 py-1"},[e("h4",{staticClass:"font-normal text-80"},[this._v("WaterSense Reason")])])}]}},function(t,e){}]);