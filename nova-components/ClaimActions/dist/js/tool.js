!function(e){var t={};function s(a){if(t[a])return t[a].exports;var r=t[a]={i:a,l:!1,exports:{}};return e[a].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=e,s.c=t,s.d=function(e,t,a){s.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:a})},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/",s(s.s=0)}([function(e,t,s){s(1),e.exports=s(6)},function(e,t,s){Nova.booting(function(e,t){e.config.devtools=!0,e.component("claim-actions",s(2))})},function(e,t,s){var a=s(3)(s(4),s(5),!1,null,null,null);e.exports=a.exports},function(e,t){e.exports=function(e,t,s,a,r,n){var o,i=e=e||{},l=typeof e.default;"object"!==l&&"function"!==l||(o=e,i=e.default);var c,d="function"==typeof i?i.options:i;if(t&&(d.render=t.render,d.staticRenderFns=t.staticRenderFns,d._compiled=!0),s&&(d.functional=!0),r&&(d._scopeId=r),n?(c=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),a&&a.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(n)},d._ssrRegister=c):a&&(c=a),c){var u=d.functional,m=u?d.render:d.beforeCreate;u?(d._injectStyles=c,d.render=function(e,t){return c.call(t),m(e,t)}):d.beforeCreate=m?[].concat(m,c):[c]}return{esModule:o,exports:i,options:d}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:["resourceName","resourceId","field"],data:function(){return{claim:null,apiError:null,denyForm:{show:!1,fields:{reasons:[],reason:{message:""}}},approveForm:{show:!1,rules:{maxValue:null},fields:{awardAmount:null}},nextId:null}},computed:{showClaimActions:function(){return this.claim&&!1===this.claim.approved&&!1===this.claim.denied},approveFormValidated:function(){return""!=this.approveForm.fields.awardAmount&&this.approveForm.fields.awardAmount<=this.approveForm.rules.maxValue},denyFormValidated:function(){return""!=this.denyForm.fields.reason.message},applicationId:function(){return(this.claim||{}).application_id}},mounted:function(){this.reload()},methods:{reload:function(){var e=this;this.apiError=null,axios.get("/api/claims/"+this.resourceId).then(function(t){e.claim=t.data}).catch(function(t){return e.fail(t)}),axios.get("/denial-reasons",{params:{type:"claim"}}).then(function(t){e.denyForm.fields.reasons=t.data}).catch(function(t){return e.fail(t)}),axios.get("/claims/"+this.resourceId+"/awardable").then(function(t){e.approveForm.rules.maxValue=t.data.awardable}).catch(function(t){return e.fail(t)}),axios.get("/api/claims/"+this.resourceId+"/next/"+(this.field.cameFromLens||"")).then(function(t){return e.nextId=t.data.id}).catch(function(t){return e.fail(t)})},toggleApproveForm:function(){this.denyForm.show=!1,this.approveForm.show=!this.approveForm.show},toggleDenyForm:function(){this.approveForm.show=!1,this.denyForm.show=!this.denyForm.show},approveClaim:function(){var e=this;axios.post("/claims/"+this.resourceId+"/approve",{awarded:parseFloat(this.approveForm.fields.awardAmount)}).then(function(t){return e.redirect()}).catch(function(t){return e.fail(t)})},denyClaim:function(){var e=this;axios.post("/claims/"+this.resourceId+"/deny",{reason:this.denyForm.fields.reason.message}).then(function(t){return e.redirect()}).catch(function(t){return e.fail(t)})},redirect:function(){var e=this,t=this.field.cameFromLens?{name:"lens",params:{resourceName:this.resourceName,lens:this.field.cameFromLens}}:{name:"index",params:{resourceName:this.resourceName}};this.$router.push(t,function(){e.$toasted.show(response.data.message,{type:"success",position:"top-right"})})},fail:function(e){if(console.error(e),"string"==typeof e)var t=e;else if((e||{}).response)t=_.get(e.response,"data.message")||e.response.statusText;else t=e.message||e.name||"Something went wrong. Contact a system admin.";this.apiError=t;try{this.$toasted.show(t,{type:"error"})}catch(e){this.$toasted.show("Something went wrong. Contact a system admin",{type:"error"})}return Promise.reject()}}}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"claim-actions pt-3"},[e.apiError?s("div",{staticClass:"py-4 border-b border-40"},[s("p",[e._v("The following error was received: "),s("span",{staticStyle:{color:"red"}},[e._v(e._s(e.apiError))])]),e._v(" "),s("button",{staticClass:"mt-3 btn btn-default bg-grey-light hover:bg-grey text-grey-darkest",attrs:{type:"button"},on:{click:e.reload}},[e._v("\n                Try again?\n            ")])]):e._e(),e._v(" "),s("div",{staticClass:"buttons mb-2"},[s("div",{staticClass:"flex flex-row"},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.claim&&e.showClaimActions,expression:"claim && showClaimActions"}]},[s("button",{staticClass:"btn btn-default btn-success",on:{click:function(t){return e.toggleApproveForm()}}},[e._v("\n                        "+e._s(e.approveForm.show?"Cancel":"Approve Claim")+"\n                    ")]),e._v(" "),s("button",{staticClass:"btn btn-default btn-primary",on:{click:function(t){return e.toggleDenyForm()}}},[e._v("\n                        "+e._s(e.denyForm.show?"Cancel":"Deny Claim")+"\n                    ")])]),e._v(" "),e.applicationId?s("router-link",{staticClass:"ml-1 btn btn-default bg-grey-light hover:bg-grey text-grey-darkest",attrs:{to:{name:"detail",params:{resourceName:"applications",resourceId:e.applicationId}}}},[e._v("\n                    View Application\n                ")]):e._e(),e._v(" "),e.nextId?s("router-link",{staticClass:"ml-1 btn btn-default bg-grey-light hover:bg-grey text-grey-darkest",attrs:{to:{name:"detail",params:{resourceName:"claims",resourceId:e.nextId}}}},[e._v("\n                    Next Claim\n                ")]):e._e()],1)]),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.approveForm.show,expression:"approveForm.show"}],staticClass:"border-t border-40 mt-6"},[s("div",{staticClass:"flex border-b border-40"},[e._m(0),e._v(" "),s("div",{staticClass:"py-6 px-8 w-4/5"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.approveForm.fields.awardAmount,expression:"approveForm.fields.awardAmount"}],staticClass:"form-control form-input form-input-bordered",attrs:{id:"award-amount"},domProps:{value:e.approveForm.fields.awardAmount},on:{input:function(t){t.target.composing||e.$set(e.approveForm.fields,"awardAmount",t.target.value)}}}),e._v(" "),s("div",{staticClass:"help-text help-text mt-2"},[e._v("The max awardable amount for this applicant is "),s("b",[s("span",{staticClass:"text-success"},[e._v("$"+e._s(e.approveForm.rules.maxValue))])])])])]),e._v(" "),s("div",{staticClass:"flex border-40"},[e._m(1),e._v(" "),s("div",{staticClass:"py-6 px-8 w-4/5"},[s("button",{staticClass:"btn btn-default btn-success inline-flex items-center relative",attrs:{disabled:!e.approveFormValidated},on:{click:function(t){return e.approveClaim()}}},[e._v("\n                        Finalize Approval\n                    ")])])])]),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.denyForm.show,expression:"denyForm.show"}],staticClass:"border-t border-40 mt-6"},[s("div",{staticClass:"flex border-b border-40"},[e._m(2),e._v(" "),s("div",{staticClass:"py-6 px-8 w-1/2"},[s("select",{directives:[{name:"model",rawName:"v-model",value:e.denyForm.fields.reason,expression:"denyForm.fields.reason"}],staticClass:"form-control form-select mb-3 w-full",on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.$set(e.denyForm.fields,"reason",t.target.multiple?s:s[0])}}},[s("option",{attrs:{value:"",selected:"selected",disabled:"disabled"}},[e._v("â€”")]),e._v(" "),e._l(e.denyForm.fields.reasons,function(t){return s("option",{domProps:{value:t}},[e._v(e._s(t.reason))])})],2)])]),e._v(" "),s("div",{staticClass:"flex border-b border-40"},[e._m(3),e._v(" "),s("div",{staticClass:"py-6 px-8 w-4/5"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:e.denyForm.fields.reason.message,expression:"denyForm.fields.reason.message"}],staticClass:"w-full form-control form-input form-input-bordered py-3 h-auto",attrs:{id:"denial-message",rows:"5",placeholder:"Denial message content here..."},domProps:{value:e.denyForm.fields.reason.message},on:{input:function(t){t.target.composing||e.$set(e.denyForm.fields.reason,"message",t.target.value)}}})])]),e._v(" "),s("div",{staticClass:"flex border-40"},[e._m(4),e._v(" "),s("div",{staticClass:"py-6 px-8 w-4/5"},[s("button",{staticClass:"btn btn-default btn-danger inline-flex items-center relative",attrs:{disabled:!e.denyFormValidated},on:{click:e.denyClaim}},[e._v("\n                        Finalize Denial\n                    ")])])])])])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"w-1/5 py-6 px-8"},[t("label",{staticClass:"inline-block text-80 pt-2 leading-tight",attrs:{for:"award-amount"}},[this._v("\n                        Amount to Award *\n                    ")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"w-1/5 py-6 px-8"},[t("label",{staticClass:"inline-block text-80 pt-2 leading-tight",attrs:{for:"denial-message"}},[this._v("Confirm")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"w-1/5 py-6 px-8"},[t("label",{staticClass:"inline-block text-80 pt-2 leading-tight"},[this._v("\n                        Denial Reason *\n                    ")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"w-1/5 py-6 px-8"},[t("label",{staticClass:"inline-block text-80 pt-2 leading-tight",attrs:{for:"denial-message"}},[this._v("\n                        Message *\n                    ")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"w-1/5 py-6 px-8"},[t("label",{staticClass:"inline-block text-80 pt-2 leading-tight",attrs:{for:"denial-message"}},[this._v("Confirm")])])}]}},function(e,t){}]);